# wallet-kms

Wallet KMS uses Hashicorp secret engine to store private keys generated by the system. 

## Pre-requisites

Setup below environment variables to start the applications.

VAULT_URL : Hashicorp vault url
VAULT_TOKEN : Hashicorp vault token
AUTH_TOKEN : Krypcore web3 platform auth token
PROXY_URL : Krypcore web3 platform proxy url
ENDPOINT : Krypcore web3 platform blockchain endpoint
WALLET_INSTANCE_ID : Krypcore web3 platform non-custodial wallet instance id

## API Requests

### Create wallet

#### Command
```bash 
curl -d '{"name":"wallet2", "algorithm": "secp256k1"}' -H "Content-Type: application/json" -X POST http://localhost:8889/wallet/createWallet
```

```bash
{"Status":"SUCCESS","Message":"wallet created successfully","Data":{"WalletId":"effae2b6-3ee3-48cb-9528-87c29152c89e"}}
```

### Submit Transaction

#### Command
```bash 
curl -d '{"walletId":"effae2b6-3ee3-48cb-9528-87c29152c89e", "to":"0xc2de797fab7d2d2b26246e93fcf2cd5873a90b10","chainId":80001,"method":"store","params":[{"type":"uint256","value":35}],"isContractTxn":true,"contractABI":"[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"num\",\"type\":\"uint256\"}],\"name\":\"store\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"retrieve\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]"}' -H "Content-Type: application/json" -H "instanceId: INS_WA_4_2023630" -H "Authorization: 49817601-81d6-4863-bc70-619211d35efd_dcd96173-bd93-46ff-8d3a-a98baeb4fa87" -X POST http://localhost:8889/wallet/submitTransaction
```

```bash
{"Status":"SUCCESS","Message":"","Data":{"txHash":"0xe19f631de5667ee0a1f0ce37f8fd50b46ba32b58946d310cccc0524be8e1e43b"}}
```

### Deploy Contract

#### Command
```bash 
curl -d '{"walletId":"effae2b6-3ee3-48cb-9528-87c29152c89e", "byteCode": "", "abi":"", "params": []}' -H "Content-Type: application/json" -H "instanceId: INS_WA_4_2023630" -H "Authorization: 49817601-81d6-4863-bc70-619211d35efd_dcd96173-bd93-46ff-8d3a-a98baeb4fa87" -X POST http://localhost:8889/wallet/deployContract
```

```bash
{"Status":"SUCCESS","Message":"","Data":{"txHash":"0xe19f631de5667ee0a1f0ce37f8fd50b46ba32b58946d310cccc0524be8e1e43b"}}
```
---
